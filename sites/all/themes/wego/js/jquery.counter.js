!function(t,e){"function"==typeof define&&"object"==typeof define.amd?define(["jquery"],e):e(t.$)}(this,function(){var t=function(t){var e=0,r=0;return jQuery.each(t.parts,function(t,n){e+=e*n.limit+n.stop,r+=r*n.limit+n.value}),t.down?e>=r:r>=e},e=function(){for(var e=jQuery(this),n=e.data("counter"),a=n.parts.length-1;a>=0;){var i=n.parts[a];if(i.value+=n.down?-1:1,n.down&&i.value<0)i.value=i.limit;else{if(n.down||!(i.value>i.limit))break;i.value=0}a--}r(e,a),t(n)&&(clearInterval(n.intervalId),e.trigger("counterStop"))},r=function(t,e){for(var r=t.data("counter"),i=r.parts.length-1,l=function(e,r){n(t,i,e,r)};i>=e;){for(var o=r.parts[i],u=o.value+"";u.length<o.padding;)u="0"+u;jQuery.each(a(u,""),l),i--}},n=function(t,e,r,n){var a=jQuery(jQuery(t.children("span.part").get(e)).find("span.digit").get(r));a.attr("class","digit digit"+n+" digit"+a.text()+n).text(n)},a=function(t){var e,r=String.prototype.split,n=/()??/.exec("")[1]===t;return e=function(e,a,i){if("[object RegExp]"!==Object.prototype.toString.call(a))return r.call(e,a,i);var l,o,u,s,p=[],d=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":""),c=0,a=new RegExp(a.source,d+"g");for(e+="",n||(l=new RegExp("^"+a.source+"jQuery(?!\\s)",d)),i=i===t?-1>>>0:i>>>0;(o=a.exec(e))&&(u=o.index+o[0].length,!(u>c&&(p.push(e.slice(c,o.index)),!n&&o.length>1&&o[0].replace(l,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(o[e]=t)}),o.length>1&&o.index<e.length&&Array.prototype.push.apply(p,o.slice(1)),s=o[0].length,c=u,p.length>=i)));)a.lastIndex===o.index&&a.lastIndex++;return c===e.length?(s||!a.test(""))&&p.push(""):p.push(e.slice(c)),p.length>i?p.slice(0,i):p}}(),i={init:function(r){return r=r||{},this.each(function(){var n=jQuery(this),i=n.data("counter")||{};i.interval=parseInt(r.interval||n.attr("data-interval")||"1000",10),i.down="down"==(r.direction||n.attr("data-direction")||"down"),i.parts=[];var l=a(r.initial||n.text(),/([^0-9]+)/),o=a(r.format||n.attr("data-format")||"23:59:59",/([^0-9]+)/),u=r.stop||n.attr("data-stop");return u&&(u=a(u,/([^0-9]+)/)),n.html(""),jQuery.each(o,function(t,e){if(/^\d+$/.test(e)){var r={};r.index=t,r.padding=(e+"").length,r.limit=parseInt(e,10),r.value=parseInt(l[l.length-o.length+t]||0,10),r.value=r.value>r.limit?r.limit:r.value,r.reset=r.value,r.stop=parseInt(u?u[u.length-o.length+t]:i.down?0:r.limit,10),r.stop=r.stop>r.limit?r.limit:r.stop,r.stop=r.stop<0?0:r.stop;for(var s=jQuery("<span>").addClass("part").addClass("part"+t),p=r.value+"";p.length<r.padding;)p="0"+p;jQuery.each(a(p,""),function(t,e){s.append(jQuery("<span>").addClass("digit digit"+e).text(e))}),n.append(s),i.parts.push(r)}else n.append(jQuery("<span>").addClass("separator").addClass("separator"+t).text(e))}),t(i)?n.trigger("counterStop"):i.intervalId=setInterval(jQuery.proxy(e,this),i.interval),n.data("counter",i),this})},play:function(){return this.each(function(){var t=jQuery(this),r=t.data("counter");r.intervalId||(r.intervalId=setInterval(jQuery.proxy(e,this),r.interval))})},reset:function(){return this.each(function(){var t=jQuery(this),n=t.data("counter");jQuery.each(n.parts,function(t,e){e.value=e.reset}),r(jQuery(this),0),n.intervalId&&(clearInterval(n.intervalId),n.intervalId=setInterval(jQuery.proxy(e,this),n.interval))})},stop:function(){return this.each(function(){var t=jQuery(this),e=t.data("counter");clearInterval(e.intervalId),e.intervalId=0,t.trigger("counterStop")})}};jQuery.fn.counter=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void jQuery.error("Method "+t+" does not exist on jQuery.counter"):i.init.apply(this,arguments)}});